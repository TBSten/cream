think harder

# 実装

固まっている要件を実装し PR 作成まで行う。

## 1. 要件が明確になっているか確認。

```md
$ARGUMENTS
```

要件が明確になっているか・テストコードが指定されているかを上記の入力から判断。
テストコードが指定されていなかったり、要件が明確になっていないようであれば、まずは要件定義コマンド (`/requirements {やりたいこと}`) を実行することを提案してください。

## 2. 実装する

- 必要があればアノテーションを追加する。
    - アノテーションは基本的に `cream-runtime/src/commonMain/kotlin/me/tbsten/cream` 内に作成する。
- ksp plugin を実装する。
    - `cream-ksp` 内に実装する。
    - public にする必要がある場合は `@InternalCreamApi` をつけて不用意に使用できないようにする。

## 3. テストを実行する

- `./gradlew jvmTest` または `./gradlew test` を使って期待通りに動作するか確認する。エラーが発生するのであれば 2 に戻って修正する。
- KSP で生成したコードは `<module>/build/generated/ksp/metadata/commonMain/` 内に生成されます。生成されたコードが問題ないかも確認してください。
- 生成した関数を呼び出す際は 戻り値の型を必ず明示するようにしてください。(例: `val result: Target = source.copyToTarget(...)`)

## 4. テストケースを充実させる

```md
$ARGUMENTS
```

- 要件定義段階では出てこなかったテストケースを洗い出す (think hard)。
- 洗い出したテストケースをコードとして実装する。
- 3 と同様にテストを実行しエラーがあれば修正する。
- テストケースは 1つのファイルにまとめるのではなく、1つの @Test メソッドで使用するグループごとにファイル分割して 見通しが良くなるようにする。ただし、要件定義段階では理解・思考の妨げになる細かいテストケースについては用意しなくて良い。

## 5. PR を作成する

@pr-creator agent を使って PR を作成してください。
